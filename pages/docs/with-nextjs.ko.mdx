import { Callout } from 'nextra-theme-docs'

# Next.jsì™€ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ë°©ë²•

## App Router [#app-dir]

### Server Components [#rsc]

<Callout type="default" emoji="âœ…">
   In Next.js App Router, all components are React Server Components (RSC) by default. **You could only import the key serialization APIs from SWR in RSC.**
</Callout>

```tsx filename="app/page.tsx" copy
import { unstable_serialize } from 'swr' // âœ… works 
import { unstable_serialize as infinite_unstable_serialize } from 'swr/infinite' // âœ… works 
```


<Callout type="error">
   You could not import any other APIs from SWR since they are not available in RSC.
</Callout>

```tsx filename="app/page.tsx" highlight={1}
import useSWR from 'swr' // âŒ it will throw an error
```

### Client Components

You need to mark your components with `'use client'` directive so that SWR could work properly.

```tsx filename="app/page.tsx" highlight={1} copy
'use client'
import useSWR from 'swr'
export default Page() {
  const { data } = useSWR('/api/user', fetcher)
  return <h1>{data.name}</h1>
}
```

If you need to use `SWRConfig` to do some global setup in your `layout` or `page` component, but you also don't want to make them client components. You could create a separate provider component.

```tsx filename="app/swr-provider.tsx" copy
'use client';
import { SWRConfig } from 'swr'
export const SWRProvider = ({ children }) => {
  return <SWRConfig>{children}</SWRConfig>
};
```

```tsx filename="app/page.tsx" copy
// This is still a server component
import { SWRProvider } from './swr-provider'
export default Page() {
  return (
    <SWRProvider>
      <h1>hello SWR</h1>
    </SWRProvider>
  )
}
```

## í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° [#client-side-data-fetching]

í˜ì´ì§€ê°€ ë¹ˆë²ˆí•˜ê²Œ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°ì´í„°ë¥¼ í¬í•¨í•˜ê³  ì´ë¥¼ í”„ë¦¬ë Œë”ë§í•  í•„ìš”ê°€ ì—†ë‹¤ë©´, SWRì€ ì™„ë²½í•˜ê²Œ ì í•©í•˜ë©° ì–´ë– í•œ íŠ¹ë³„í•œ ì„¤ì •ë„ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. `useSWR`ì„ ì„í¬íŠ¸í•˜ê³  ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ì´ hookì„ ì‚¬ìš©í•˜ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.

ë™ì‘ ë°©ì‹:

- ë¨¼ì €, ë°ì´í„° ì—†ì´ í˜ì´ì§€ë¥¼ ì¦‰ì‹œ ë³´ì—¬ì¤ë‹ˆë‹¤. ë¹ ì§„ ë°ì´í„°ë¥¼ ìœ„í•œ ë¡œë”© ìƒíƒœë¥¼ ë³´ì—¬ì£¼ì–´ë„ ë©ë‹ˆë‹¤.
- ê·¸ë‹¤ìŒ, í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ì¤€ë¹„ë˜ë©´ ë³´ì—¬ì¤ë‹ˆë‹¤.

ì´ëŸ° ì ‘ê·¼ì€ ì‚¬ìš©ì ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ ê°™ì€ ê³³ì— ì í•©í•©ë‹ˆë‹¤. ëŒ€ì‹œë³´ë“œëŠ” ë¹„ê³µê°œìš©ì´ë©° ì‚¬ìš©ìë³„ í˜ì´ì§€ì´ë¯€ë¡œ SEOì™€ ê´€ê³„ê°€ ì—†ê³  í˜ì´ì§€ë¥¼ í”„ë¦¬ë Œë”ë§í•  í•„ìš”ë„ ì—†ìŠµë‹ˆë‹¤. ë°ì´í„°ëŠ” ë¹ˆë²ˆí•˜ê²Œ ì—…ë°ì´íŠ¸ë˜ë¯€ë¡œ ìš”ì²­ ì‹œì— ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.

## ê¸°ë³¸ê°’ìœ¼ë¡œ í”„ë¦¬ë Œë”ë§í•˜ê¸° [#pre-rendering-with-default-data]

í˜ì´ì§€ê°€ ë°˜ë“œì‹œ í”„ë¦¬ë Œë”ë§ ë˜ì–´ì•¼ í•œë‹¤ë©´, Next.jsëŠ” [2ê°€ì§€ í˜•íƒœì˜ í”„ë¦¬ë Œë”ë§](https://nextjs.org/docs/basic-features/data-fetching)ì„ ì§€ì›í•©ë‹ˆë‹¤:
**ì •ì  ìƒì„± (SSG)** ë° **ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ (SSR)**.

SWRì™€ í•¨ê»˜ SEOë¥¼ ìœ„í•´ í˜ì´ì§€ë¥¼ í”„ë¦¬ë Œë”ë§ í•  ìˆ˜ ìˆê³ , ìºì‹±, ì¬ê²€ì¦, í¬ì»¤ìŠ¤ ì¶”ì , í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ ê°„ê²©ì„ ë‘ê³  ë‹¤ì‹œ ê°€ì ¸ì˜¤ê¸°ì™€ ê°™ì€ ê¸°ëŠ¥ë„ ìˆìŠµë‹ˆë‹¤.

ëª¨ë“  SWR hooksì— ì´ˆê¸°ê°’ìœ¼ë¡œ í”„ë¦¬íŒ¨ì¹­ëœ ë°ì´í„°ë¥¼ ë„˜ê²¨ì£¼ê¸° ìœ„í•´ [`SWRConfig`](/docs/global-configuration)ì˜ `fallback` ì˜µì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
`getStaticProps`ë¥¼ ì‚¬ìš©í•œ ì˜ˆì‹œ:

```jsx
 export async function getStaticProps () {
  // `getStaticProps`ëŠ” ì„œë²„ ì‚¬ì´ë“œì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.
  const article = await getArticleFromAPI()
  return {
    props: {
      fallback: {
        '/api/article': article
      }
    }
  }
}

function Article() {
  // `data`ëŠ” `fallback`ì— ìˆê¸° ë•Œë¬¸ì— í•­ìƒ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  const { data } = useSWR('/api/article', fetcher)
  return <h1>{data.title}</h1>
}

export default function Page({ fallback }) {
  // `SWRConfig` ê²½ê³„ ë‚´ë¶€ì— ìˆëŠ” SWR hooksëŠ” í•´ë‹¹ ê°’ë“¤ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
  return (
    <SWRConfig value={{ fallback }}>
      <Article />
    </SWRConfig>
  )
}
```

í•´ë‹¹ í˜ì´ì§€ëŠ” ì—¬ì „íˆ í”„ë¦¬ë Œë”ë§ ë©ë‹ˆë‹¤. SEO ì¹œí™”ì ì´ê³ , ì‘ë‹µì´ ë¹ ë¥´ì§€ë§Œ, í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì˜ SWRì— ì˜í•´ ì™„ì „íˆ êµ¬ë™ë©ë‹ˆë‹¤. ë°ì´í„°ëŠ” ë™ì ì´ê³  ì‹œê°„ì´ ì§€ë‚˜ë©´ì„œ ìì²´ ì—…ë°ì´íŠ¸ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<Callout emoji="ğŸ’¡">
  `Article` ì»´í¬ë„ŒíŠ¸ëŠ” ë¯¸ë¦¬ ìƒì„±ëœ ë°ì´í„°ë¡œ ë¨¼ì € ë Œë”ë§í•˜ê³ , í•´ë‹¹ í˜ì´ì§€ê°€ í•˜ì´ë“œë ˆì´íŠ¸ ëœ í›„ì— ìµœì‹  ë°ì´í„°ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì™€ ìƒˆë¡œ ê³ ì¹©ë‹ˆë‹¤.
</Callout>

### Complex Keys [#complex-keys]

`useSWR`ëŠ” `array`ë‚˜ `function` íƒ€ì…ì„ keyë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ íƒ€ì…ì˜ í‚¤ë¥¼ ì´ìš©í•´ ë¯¸ë¦¬ íŒ¨ì¹˜ëœ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  `fallback` keyë“¤ì„ `unstable_serialize`ì™€ í•¨ê»˜ ì§ë ¬í™”í•´ì•¼í•©ë‹ˆë‹¤.

```jsx
import useSWR, { unstable_serialize } from 'swr'

export async function getStaticProps () {
  const article = await getArticleFromAPI(1)
  return {
    props: {
      fallback: {
        // unstable_serialize()ì— ë°°ì—´ ìŠ¤íƒ€ì¼ì˜ í‚¤
        [unstable_serialize(['api', 'article', 1])]: article,
      }
    }
  }
}

function Article() {
  // ë°°ì—´ ìŠ¤íƒ€ì¼ì˜ í‚¤ ì‚¬ìš©
  const { data } = useSWR(['api', 'article', 1], fetcher)
  return <h1>{data.title}</h1>
}

export default function Page({ fallback }) {
  return (
    <SWRConfig value={{ fallback }}>
      <Article />
    </SWRConfig>
  )
}
```
