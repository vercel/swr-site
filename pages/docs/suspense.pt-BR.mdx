import Callout from 'nextra-theme-docs/callout'

# Suspense

<Callout emoji="üö®" type="error">
    Suspense √© atualmente uma funcionalidade <strong>experimental</strong> do React. Estas APIs podem mudar significativamente e sem aviso antes de serem adicionadas ao React.<br/>
    <a href="https://reactjs.org/docs/concurrent-mode-suspense.html" target="_blank" rel="noopener">Mais informa√ß√µes</a>
</Callout>

<Callout>
  Note que o React Suspense n√£o √© suportado no modo SSR.
</Callout>

Voc√™ pode habilitar a op√ß√£o `suspense` para usar SWR com React Suspense:

```jsx
import { Suspense } from 'react'
import useSWR from 'swr'

function Profile () {
  const { data } = useSWR('/api/user', fetcher, { suspense: true })
  return <div>hello, {data.name}</div>
}

function App () {
  return (
    <Suspense fallback={<div>loading...</div>}>
      <Profile/>
    </Suspense>
  )
}
```

<Callout>
  Note que a op√ß√£o `suspense` n√£o √© permitida a mudar no ciclo de vida.
</Callout>

Em modo Suspense, `data` √© sempre a resposta do fetch (ent√£o voc√™ n√£o precisa checar se √© `undefined`).
Mas se um erro ocorreu, voc√™ precisa usar um [limite de erro (Error Boundary)](https://pt-br.reactjs.org/docs/error-boundaries.html) para o capturar:

```jsx
<ErrorBoundary fallback={<h2>Could not fetch posts.</h2>}>
  <Suspense fallback={<h1>Loading posts...</h1>}>
    <Profile />
  </Suspense>
</ErrorBoundary>
```

---

### Nota: Com Fetching Condicional

Normalmente, quando voc√™ habilita `suspense`, √© garantido que `data` estar√° sempre pronto na renderiza√ß√£o:

```jsx
function Profile () {
  const { data } = useSWR('/api/user', fetcher, { suspense: true })

  // `data` nunca ser√° `undefined`
  // ...
}
```

No entanto, ao us√°-lo junto com uma busca condicional ou busca dependente, `data` ser√° `undefined` se a solicita√ß√£o estiver **pausada**:

```jsx
function Profile () {
  const { data } = useSWR(isReady ? '/api/user' : null, fetcher, { suspense: true })

  // `data` ser√° `undefined` se `isReady` √© false
  // ...
}
```

Se voc√™ quiser ler mais detalhes t√©cnicos sobre essa restri√ß√£o, cheque [a discuss√£o aqui](https://github.com/vercel/swr/pull/357#issuecomment-627089889).
