import Callout from 'nextra-theme-docs/callout'

# ì„œìŠ¤íœìŠ¤

<Callout emoji="ğŸš¨" type="error">
  React still <strong>doesn't recommend</strong> using `Suspense` in data frameworks like SWR (<a href="https://reactjs.org/blog/2022/03/29/react-v18.html#suspense-in-data-frameworks" target="_blank" rel="noopener">More information</a>). These APIs may change in the future as the results of our research.
</Callout>

React ì„œìŠ¤íœìŠ¤ë¥¼ SWRê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ë ¤ë©´ `suspense` ì˜µì…˜ì„ í™œì„±í™”í•˜ì„¸ìš”.

```jsx
import { Suspense } from 'react'
import useSWR from 'swr'

function Profile () {
  const { data } = useSWR('/api/user', fetcher, { suspense: true })
  return <div>hello, {data.name}</div>
}

function App () {
  return (
    <Suspense fallback={<div>loading...</div>}>
      <Profile/>
    </Suspense>
  )
}
```

<Callout>
  `suspense` ì˜µì…˜ì€ ìƒëª… ì£¼ê¸° ë‚´ì—ì„œ ë³€ê²½ì„ í—ˆìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
</Callout>

ì„œìŠ¤íœìŠ¤ ëª¨ë“œì—ì„œ `data`ëŠ” í•­ìƒ ì‘ë‹µì„ ê°€ì ¸ì˜µë‹ˆë‹¤(ë”°ë¼ì„œ `undefined`ë¥¼ ê²€ì‚¬í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤).
í•˜ì§€ë§Œ ì—ëŸ¬ê°€ ë°œìƒí•  ê²½ìš° [ì—ëŸ¬ ê²½ê³„](https://reactjs.org/docs/concurrent-mode-suspense.html#handling-errors)ë¥¼ ì‚¬ìš©í•´ ìºì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.

```jsx
<ErrorBoundary fallback={<h2>Could not fetch posts.</h2>}>
  <Suspense fallback={<h1>Loading posts...</h1>}>
    <Profile />
  </Suspense>
</ErrorBoundary>
```

<Callout>
Suspense mode suspends rendering until the data is ready, which means it causes waterfall problems easily. To avoid that, you should prefetch resources before rendering. [More information](/docs/prefetching)
</Callout>

---

### ë…¸íŠ¸: ì¡°ê±´ë¶€ ê°€ì ¸ì˜¤ê¸°ì™€ í•¨ê»˜

ì¼ë°˜ì ìœ¼ë¡œ `suspense`ë¥¼ í™œì„±í™”í•˜ë©´ ë Œë”ë§ ì‹œì— `data`ê°€ í•­ìƒ ì¤€ë¹„ë©ë‹ˆë‹¤.

```jsx
function Profile () {
  const { data } = useSWR('/api/user', fetcher, { suspense: true })

  // `data`ëŠ” ì ˆëŒ€ `undefined`ê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤
  // ...
}
```

í•˜ì§€ë§Œ ì¡°ê±´ë¶€ ê°€ì ¸ì˜¤ê¸°ë‚˜ ì˜ì¡´ì  ê°€ì ¸ì˜¤ê¸°ì™€ í•¨ê»˜ ì‚¬ìš©ë˜ë©´ `data`ëŠ” ìš”ì²­ì´ **ì¼ì‹œ ì¤‘ë‹¨**ëœ ê²½ìš° `undefined`ê°€ ë©ë‹ˆë‹¤.

```jsx
function Profile () {
  const { data } = useSWR(isReady ? '/api/user' : null, fetcher, { suspense: true })

  // `isReady`ê°€ falseì´ë©´ `data`ëŠ” `undefined`ì…ë‹ˆë‹¤
  // ...
}
```

ì´ ì œí•œì— ëŒ€í•œ ë” ê¸°ìˆ ì ì¸ ìƒì„¸ ë‚´ìš©ì„ ì½ìœ¼ë ¤ë©´ [ì—¬ê¸° discussion](https://github.com/vercel/swr/pull/357#issuecomment-627089889)ì„ í™•ì¸í•´ ë³´ì„¸ìš”.

### Server-Side Rendering

When using Suspense mode on the server-side (including pre-rendering in Next.js), it's **required** to provide the initial data via [fallbackData or fallback](/docs/with-nextjs#pre-rendering-with-default-data). This means that you can't use Suspense to fetch data on the server side, but either doing fully client-side data fetching, or fetch the data via the framework (such as getStaticProps in Next.js). More discussions can be [here](https://github.com/vercel/swr/issues/1906).
