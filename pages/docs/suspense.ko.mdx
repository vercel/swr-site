import { Callout } from 'nextra-theme-docs'

# ì„œìŠ¤íœìŠ¤

<Callout emoji="ğŸš¨" type="error">
  ë¦¬ì•¡íŠ¸ëŠ” ì—¬ì „íˆ SWR(<a href="https://reactjs.org/blog/2022/03/29/react-v18.html#suspense-in-data-frameworks" target="_blank" rel="noopener">ì¶”ê°€ ì •ë³´</a>) ê³¼ ê°™ì€ ë°ì´í„° í”„ë ˆì„ì›Œí¬ì—ì„œ ì„œìŠ¤íœìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ APIëŠ” í–¥í›„ ì—°êµ¬ ê²°ê³¼ì— ë”°ë¼ ë³€ê²½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
</Callout>

React ì„œìŠ¤íœìŠ¤ë¥¼ SWRê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ë ¤ë©´ `suspense` ì˜µì…˜ì„ í™œì„±í™”í•˜ì„¸ìš”.

```jsx
import { Suspense } from 'react'
import useSWR from 'swr'

function Profile () {
  const { data } = useSWR('/api/user', fetcher, { suspense: true })
  return <div>hello, {data.name}</div>
}

function App () {
  return (
    <Suspense fallback={<div>loading...</div>}>
      <Profile/>
    </Suspense>
  )
}
```

<Callout>
  `suspense` ì˜µì…˜ì€ ìƒëª… ì£¼ê¸° ë‚´ì—ì„œ ë³€ê²½ì„ í—ˆìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
</Callout>

ì„œìŠ¤íœìŠ¤ ëª¨ë“œì—ì„œ `data`ëŠ” í•­ìƒ ì‘ë‹µì„ ê°€ì ¸ì˜µë‹ˆë‹¤(ë”°ë¼ì„œ `undefined`ë¥¼ ê²€ì‚¬í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤).
í•˜ì§€ë§Œ ì—ëŸ¬ê°€ ë°œìƒí•  ê²½ìš° [ì—ëŸ¬ ê²½ê³„](https://reactjs.org/docs/concurrent-mode-suspense.html#handling-errors)ë¥¼ ì‚¬ìš©í•´ ìºì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.

```jsx
<ErrorBoundary fallback={<h2>Could not fetch posts.</h2>}>
  <Suspense fallback={<h1>Loading posts...</h1>}>
    <Profile />
  </Suspense>
</ErrorBoundary>
```

<Callout>
Suspense mode suspends rendering until the data is ready, which means it causes waterfall problems easily. To avoid that, you should prefetch resources before rendering. [More information](/docs/prefetching)
</Callout>

---

### ë…¸íŠ¸: ì¡°ê±´ë¶€ ê°€ì ¸ì˜¤ê¸°ì™€ í•¨ê»˜ [#note-with-conditional-fetching]

ì¼ë°˜ì ìœ¼ë¡œ `suspense`ë¥¼ í™œì„±í™”í•˜ë©´ ë Œë”ë§ ì‹œì— `data`ê°€ í•­ìƒ ì¤€ë¹„ë©ë‹ˆë‹¤.

```jsx
function Profile () {
  const { data } = useSWR('/api/user', fetcher, { suspense: true })

  // `data`ëŠ” ì ˆëŒ€ `undefined`ê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤
  // ...
}
```

í•˜ì§€ë§Œ ì¡°ê±´ë¶€ ê°€ì ¸ì˜¤ê¸°ë‚˜ ì˜ì¡´ì  ê°€ì ¸ì˜¤ê¸°ì™€ í•¨ê»˜ ì‚¬ìš©ë˜ë©´ `data`ëŠ” ìš”ì²­ì´ **ì¼ì‹œ ì¤‘ë‹¨**ëœ ê²½ìš° `undefined`ê°€ ë©ë‹ˆë‹¤.

```jsx
function Profile () {
  const { data } = useSWR(isReady ? '/api/user' : null, fetcher, { suspense: true })

  // `isReady`ê°€ falseì´ë©´ `data`ëŠ” `undefined`ì…ë‹ˆë‹¤
  // ...
}
```

ì´ ì œí•œì— ëŒ€í•œ ë” ê¸°ìˆ ì ì¸ ìƒì„¸ ë‚´ìš©ì„ ì½ìœ¼ë ¤ë©´ [ì—¬ê¸°ë¥¼](https://github.com/vercel/swr/pull/357#issuecomment-627089889) í™•ì¸í•´ ë³´ì„¸ìš”.

### ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ [#server-side-rendering]

ì„œìŠ¤íœìŠ¤ ëª¨ë“œë¥¼ ì„œë²„ ì‚¬ì´ë“œì—ì„œ ì‚¬ìš©í•  ë•Œ (Next.jsì—ì„œì˜ pre-rendering í¬í•¨), [fallbackData ë˜ëŠ” fallback](/docs/with-nextjs#pre-rendering-with-default-data)ì„ í†µí•´ ì´ˆê¸° ë°ì´í„°ë¥¼ **ì œê³µí•´ì•¼ë§Œ í•©ë‹ˆë‹¤**. ì¦‰, ì„œë²„ ì‚¬ì´ë“œì—ì„œ`Suspense`ë¥¼ ì‚¬ìš© í•  ìˆ˜ ì—†ì§€ë§Œ, í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°ë‚˜, í”„ë ˆì„ì›Œí¬ ìˆ˜ì¤€ì˜ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°(Next.jsì˜ getStaticProps ë“±)ëŠ” ê°€ëŠ¥í•©ë‹ˆë‹¤. ë” ë§ì€ ì •ë³´ëŠ” [ì—¬ê¸°ì„œ](https://github.com/vercel/swr/issues/1906) ì°¾ì•„ë³´ì„¸ìš”.
