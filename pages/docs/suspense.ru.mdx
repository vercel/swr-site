import { Callout } from 'nextra-theme-docs'

# –ó–∞–¥–µ—Ä–∂–∫–∞ (Suspense)

<Callout emoji="üö®" type="error">
  React –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É <strong>–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç</strong> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Suspense –≤ —Ç–∞–∫–∏—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞—Ö, –∫–∞–∫ SWR. (<a href="https://ru.reactjs.org/blog/2022/03/29/react-v18.html#suspense-in-data-frameworks" target="_blank" rel="noopener">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</a>). –ü–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –Ω–∞—à–µ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —ç—Ç–∏ API –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –≤ –±—É–¥—É—â–µ–º.
</Callout>

–í—ã –º–æ–∂–µ—Ç–µ –≤–∫–ª—é—á–∏—Ç—å –æ–ø—Ü–∏—é `suspense`, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SWR —Å React Suspense:

```jsx
import { Suspense } from 'react'
import useSWR from 'swr'

function Profile () {
  const { data } = useSWR('/api/user', fetcher, { suspense: true })
  return <div>–ø—Ä–∏–≤–µ—Ç, {data.name}</div>
}

function App () {
  return (
    <Suspense fallback={<div>–∑–∞–≥—Ä—É–∑–∫–∞...</div>}>
      <Profile/>
    </Suspense>
  )
}
```

<Callout>
  –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –æ–ø—Ü–∏—é `suspense` –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω—è—Ç—å –≤ –∂–∏–∑–Ω–µ–Ω–Ω–æ–º —Ü–∏–∫–ª–µ.
</Callout>

–í —Ä–µ–∂–∏–º–µ –∑–∞–¥–µ—Ä–∂–∫–∏ `data` –≤—Å–µ–≥–¥–∞ —è–≤–ª—è–µ—Ç—Å—è –æ—Ç–≤–µ—Ç–æ–º –≤—ã–±–æ—Ä–∫–∏ (–ø–æ—ç—Ç–æ–º—É –≤–∞–º –Ω–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω–∞ `undefined`).
–ù–æ –µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –≤–∞–º –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [–ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–∏](https://ru.reactjs.org/docs/concurrent-mode-suspense.html#handling-errors), —á—Ç–æ–±—ã –µ—ë –æ—Ç–ª–æ–≤–∏—Ç—å:

```jsx
<ErrorBoundary fallback={<h2>–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç—ã.</h2>}>
  <Suspense fallback={<h1>–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–æ–≤...</h1>}>
    <Profile />
  </Suspense>
</ErrorBoundary>
```

<Callout>
–†–µ–∂–∏–º Suspense –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –¥–∞–Ω–Ω—ã–µ –Ω–µ –±—É–¥—É—Ç –≥–æ—Ç–æ–≤—ã, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω –ª–µ–≥–∫–æ –≤—ã–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã –≤–æ–¥–æ–ø–∞–¥–∞. –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —ç—Ç–æ–≥–æ, –≤—ã –¥–æ–ª–∂–Ω—ã –¥–µ–ª–∞—Ç—å –ø—Ä–µ–¥–≤—ã–±–æ—Ä–∫—É —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º. [–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è](/docs/prefetching)
</Callout>

---

### –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑—É—è —É—Å–ª–æ–≤–Ω—É—é –≤—ã–±–æ—Ä–∫—É [#note-with-conditional-fetching]

–û–±—ã—á–Ω–æ, –∫–æ–≥–¥–∞ –≤—ã –≤–∫–ª—é—á–∞–µ—Ç–µ `suspense`, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ `data` –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞ –∫ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É:

```jsx
function Profile () {
  const { data } = useSWR('/api/user', fetcher, { suspense: true })

  // `data` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥–µ—Ç `undefined`
  // ...
}
```

–û–¥–Ω–∞–∫–æ –ø—Ä–∏ –µ—ë –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤–º–µ—Å—Ç–µ —Å —É—Å–ª–æ–≤–Ω–æ–π –≤—ã–±–æ—Ä–∫–æ–π –∏–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ–π –≤—ã–±–æ—Ä–∫–æ–π ‚Äî `data` –±—É–¥–µ—Ç `undefined`, –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å **–ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω**:

```jsx
function Profile () {
  const { data } = useSWR(isReady ? '/api/user' : null, fetcher, { suspense: true })

  // `data` –±—É–¥–µ—Ç `undefined` –µ—Å–ª–∏ `isReady` –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ false
  // ...
}
```

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π –æ–± —ç—Ç–æ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–∏, —Å–º–æ—Ç—Ä–∏—Ç–µ [–æ–±—Å—É–∂–¥–µ–Ω–∏—è –∑–¥–µ—Å—å](https://github.com/vercel/swr/pull/357#issuecomment-627089889).

### –°–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (SSR) [#server-side-rendering]

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ä–µ–∂–∏–º–∞ –∑–∞–¥–µ—Ä–∂–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–≤–∫–ª—é—á–∞—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤ Next.js) **—Ç—Ä–µ–±—É–µ—Ç—Å—è** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ [fallbackData –∏–ª–∏ fallback](/docs/with-nextjs#–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π-—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥-—Å-–∏—Å—Ö–æ–¥–Ω—ã–º–∏-–¥–∞–Ω–Ω—ã–º–∏). –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Suspense` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –∞ –ª–∏–±–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–≤–ª–µ–∫–∞–µ—Ç–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞, –ª–∏–±–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç–µ –¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, getStaticProps –≤ Next.js). –ë–æ–ª—å—à–µ –æ–±—Å—É–∂–¥–µ–Ω–∏–π –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ [–∑–¥–µ—Å—å](https://github.com/vercel/swr/issues/1906).
