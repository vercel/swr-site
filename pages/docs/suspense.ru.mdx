import Callout from 'nextra-theme-docs/callout'

# –ó–∞–¥–µ—Ä–∂–∫–∞ (Suspense)

<Callout emoji="üö®" type="error">
  –ó–∞–¥–µ—Ä–∂–∫–∞ (Suspense) –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è —è–≤–ª—è–µ—Ç—Å—è <strong>—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π</strong> —Ñ—É–Ω–∫—Ü–∏–µ–π React. –≠—Ç–∏ API –º–æ–≥—É—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, –ø—Ä–µ–∂–¥–µ —á–µ–º —Å—Ç–∞–Ω—É—Ç —á–∞—Å—Ç—å—é React.<br/>
  <a href="https://ru.reactjs.org/docs/concurrent-mode-suspense.html" target="_blank" rel="noopener">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
</Callout>

<Callout>
  –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ React Suspense –µ—â—ë –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ SSR.
</Callout>

–í—ã –º–æ–∂–µ—Ç–µ –≤–∫–ª—é—á–∏—Ç—å –æ–ø—Ü–∏—é `suspense`, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SWR —Å React Suspense:

```jsx
import { Suspense } from 'react'
import useSWR from 'swr'

function Profile () {
  const { data } = useSWR('/api/user', fetcher, { suspense: true })
  return <div>–ø—Ä–∏–≤–µ—Ç, {data.name}</div>
}

function App () {
  return (
    <Suspense fallback={<div>–∑–∞–≥—Ä—É–∑–∫–∞...</div>}>
      <Profile/>
    </Suspense>
  )
}
```

<Callout>
  –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –æ–ø—Ü–∏—é `suspense` –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω—è—Ç—å –≤ –∂–∏–∑–Ω–µ–Ω–Ω–æ–º —Ü–∏–∫–ª–µ.
</Callout>

–í —Ä–µ–∂–∏–º–µ –∑–∞–¥–µ—Ä–∂–∫–∏ `data` –≤—Å–µ–≥–¥–∞ —è–≤–ª—è–µ—Ç—Å—è –æ—Ç–≤–µ—Ç–æ–º –≤—ã–±–æ—Ä–∫–∏ (–ø–æ—ç—Ç–æ–º—É –≤–∞–º –Ω–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω–∞ `undefined`).
–ù–æ –µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –≤–∞–º –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [–ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–∏](https://ru.reactjs.org/docs/concurrent-mode-suspense.html#handling-errors), —á—Ç–æ–±—ã –µ—ë –æ—Ç–ª–æ–≤–∏—Ç—å:

```jsx
<ErrorBoundary fallback={<h2>–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç—ã.</h2>}>
  <Suspense fallback={<h1>–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–æ–≤...</h1>}>
    <Profile />
  </Suspense>
</ErrorBoundary>
```

---

### –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑—É—è —É—Å–ª–æ–≤–Ω—É—é –≤—ã–±–æ—Ä–∫—É

–û–±—ã—á–Ω–æ, –∫–æ–≥–¥–∞ –≤—ã –≤–∫–ª—é—á–∞–µ—Ç–µ `suspense`, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ `data` –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞ –∫ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É:

```jsx
function Profile () {
  const { data } = useSWR('/api/user', fetcher, { suspense: true })

  // `data` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥–µ—Ç `undefined`
  // ...
}
```

–û–¥–Ω–∞–∫–æ –ø—Ä–∏ –µ—ë –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤–º–µ—Å—Ç–µ —Å —É—Å–ª–æ–≤–Ω–æ–π –≤—ã–±–æ—Ä–∫–æ–π –∏–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ–π –≤—ã–±–æ—Ä–∫–æ–π ‚Äî `data` –±—É–¥–µ—Ç `undefined`, –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å **–ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω**:

```jsx
function Profile () {
  const { data } = useSWR(isReady ? '/api/user' : null, fetcher, { suspense: true })

  // `data` –±—É–¥–µ—Ç `undefined` –µ—Å–ª–∏ `isReady` –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ false
  // ...
}
```

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π –æ–± —ç—Ç–æ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–∏, —Å–º–æ—Ç—Ä–∏—Ç–µ [–æ–±—Å—É–∂–¥–µ–Ω–∏—è –∑–¥–µ—Å—å](https://github.com/vercel/swr/pull/357#issuecomment-627089889).
