import Callout from 'nextra-theme-docs/callout'
import Link from 'next/link'

# –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–í–Ω—É—Ç—Ä–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤–∞—à–µ–≥–æ React-–ø—Ä–æ–µ–∫—Ç–∞, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```plaintext
yarn add swr
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—è npm:

```plaintext
npm install swr
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–î–ª—è –æ–±—ã—á–Ω—ã—Ö RESTful API —Å –¥–∞–Ω–Ω—ã–º–∏ JSON —Å–Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `fetcher`, –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è
–ø—Ä–æ—Å—Ç–æ –æ–±–æ–ª–æ—á–∫–æ–π –¥–ª—è –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ `fetch`:

```jsx
const fetcher = (...args) => fetch(...args).then(res => res.json())
```

<Callout emoji="üí°">
  –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GraphQL API –∏–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ Axios, –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é 
  —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é fetcher-—Ñ—É–Ω–∫—Ü–∏—é.
  –°–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã <Link href="/docs/data-fetching"><a href="/docs/data-fetching">–∑–¥–µ—Å—å</a></Link>.
</Callout>

–ó–∞—Ç–µ–º –º–æ–∂–µ—Ç–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `useSWR` –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```jsx
import useSWR from 'swr'

function Profile () {
  const { data, error } = useSWR('/api/user/123', fetcher)

  if (error) return <div>–æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</div>
  if (!data) return <div>–∑–∞–≥—Ä—É–∑–∫–∞...</div>

  // —Ä–µ–Ω–¥–µ—Ä –¥–∞–Ω–Ω—ã—Ö
  return <div>–ø—Ä–∏–≤–µ—Ç, {data.name}!</div>
}
```

–û–±—ã—á–Ω–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç 3 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞: ¬´–∑–∞–≥—Ä—É–∑–∫–∞¬ª, ¬´–≥–æ—Ç–æ–≤–æ¬ª –∏–ª–∏ ¬´–æ—à–∏–±–∫–∞¬ª. –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
–∑–Ω–∞—á–µ–Ω–∏–µ `data` –∏ `error`, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∏ –≤–µ—Ä–Ω—É—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π UI.

## –î–µ–ª–∞–π—Ç–µ –º–Ω–æ–≥–æ—Ä–∞–∑–æ–≤—ã–º–∏

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–∞–º –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤–æ –º–Ω–æ–≥–∏—Ö –º–µ—Å—Ç–∞—Ö
–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –°–æ–∑–¥–∞–≤–∞—Ç—å –º–Ω–æ–≥–æ—Ä–∞–∑–æ–≤—ã–µ —Ö—É–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–≤–µ—Ä—Ö SWR –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –ø—Ä–æ—Å—Ç–æ:

```jsx
function useUser (id) {
  const { data, error } = useSWR(`/api/user/${id}`, fetcher)

  return {
    user: data,
    isLoading: !error && !data,
    isError: error
  }
}
```

–ò –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö –≤ —Å–≤–æ–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö:

```jsx
function Avatar ({ id }) {
  const { user, isLoading, isError } = useUser(id)

  if (isLoading) return <Spinner />
  if (isError) return <Error />
  return <img src={user.avatar} />
}
```

–ò—Å–ø–æ–ª—å–∑—É—è —ç—Ç–æ—Ç —à–∞–±–ª–æ–Ω, –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–±—ã—Ç—å –æ–± –∏–º–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–º –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö: –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å,
–æ–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –≤–µ—Ä–Ω—É—Ç—å –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤–∞—à –∫–æ–¥ –±–æ–ª–µ–µ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–µ–Ω:
–≤–∞–º –ø—Ä–æ—Å—Ç–æ –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º.

## –ü—Ä–∏–º–µ—Ä

–í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –Ω–∞—à –≤–µ–±-—Å–∞–π—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç, –æ–±–∞ –∑–∞–≤–∏—Å—è—Ç –æ—Ç `user`:

import { Welcome } from 'components/diagrams/welcome'

<div className="mt-8">
  <Welcome/>
</div>

–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ –º—ã –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ–¥–∏–Ω —Ä–∞–∑, –∏—Å–ø–æ–ª—å–∑—É—è `useEffect` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è,
–∏ –ø–µ—Ä–µ–¥–∞–µ–º –∏—Ö –¥–æ—á–µ—Ä–Ω–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ –ø—Ä–æ–ø—Å—ã (–æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –º—ã –ø–æ–∫–∞ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º
—Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—à–∏–±–∫–∏):

```jsx {7-11,17,18,27}
// –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã

function Page () {
  const [user, setUser] = useState(null)

  // –≤—ã–±–æ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
  useEffect(() => {
    fetch('/api/user')
      .then(res => res.json())
      .then(data => setUser(data))
  }, [])

  // –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
  if (!user) return <Spinner/>

  return <div>
    <Navbar user={user} />
    <Content user={user} />
  </div>
}

// –¥–æ—á–µ—Ä–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

function Navbar ({ user }) {
  return <div>
    ...
    <Avatar user={user} />
  </div>
}

function Content ({ user }) {
  return <h1>–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º, {user.name}</h1>
}

function Avatar ({ user }) {
  return <img src={user.avatar} alt={user.name} />
}
```

–û–±—ã—á–Ω–æ –Ω–∞–º –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—ã–±–æ—Ä–∫—É –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø—Ä–æ–ø—Å—ã
–∫ –∫–∞–∂–¥–æ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –≤ –≥–ª—É–±–∏–Ω–µ –¥–µ—Ä–µ–≤–∞. –ö–æ–¥ —Å—Ç–∞–Ω–µ—Ç —Ç—Ä—É–¥–Ω–µ–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å, –µ—Å–ª–∏ –º—ã –¥–æ–±–∞–≤–∏–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
–±–æ–ª—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–∞–Ω–Ω—ã—Ö.

–•–æ—Ç—è –º—ã –º–æ–∂–µ–º –∏–∑–±–µ–∂–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –ø—Ä–æ–ø—Å–æ–≤ —Å –ø–æ–º–æ—â—å—é [–ö–æ–Ω—Ç–µ–∫—Å—Ç–∞](https://ru.reactjs.org/docs/context.html),
–≤—Å—ë –µ—â—ë —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–±–ª–µ–º–∞ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–≥—É—Ç –±—ã—Ç—å
–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏, –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è –º–æ–∂–µ—Ç –Ω–µ –∑–Ω–∞—Ç—å, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è –µ–≥–æ –¥–æ—á–µ—Ä–Ω–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º.

SWR –æ—Ç–ª–∏—á–Ω–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É. –° –ø–æ–º–æ—â—å—é —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Ö—É–∫–∞ `useUser` –∫–æ–¥ –º–æ–∂–Ω–æ —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Ç–∞–∫:

```jsx {20,26}
// –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã

function Page () {
  return <div>
    <Navbar />
    <Content />
  </div>
}

// –¥–æ—á–µ—Ä–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

function Navbar () {
  return <div>
    ...
    <Avatar />
  </div>
}

function Content () {
  const { user, isLoading } = useUser()
  if (isLoading) return <Spinner />
  return <h1>–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º, {user.name}</h1>
}

function Avatar () {
  const { user, isLoading } = useUser()
  if (isLoading) return <Spinner />
  return <img src={user.avatar} alt={user.name} />
}
```

–¢–µ–ø–µ—Ä—å –¥–∞–Ω–Ω—ã–µ **–ø—Ä–∏–≤—è–∑–∞–Ω—ã** –∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ, –∏ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã **–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã**
–¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞. –í—Å–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –Ω–µ –Ω—É–∂–Ω–æ –Ω–∏—á–µ–≥–æ –∑–Ω–∞—Ç—å –æ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –æ–± –∏—Ö –ø–µ—Ä–µ–¥–∞—á–µ.
–û–Ω–∏ –ø—Ä–æ—Å—Ç–æ —Ä–µ–Ω–¥–µ—Ä—è—Ç. –ö–æ–¥ —Å—Ç–∞–ª –Ω–∞–º–Ω–æ–≥–æ –ø—Ä–æ—â–µ –∏ –ª–µ–≥—á–µ –≤ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏.

–°–∞–º—ã–º –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–º —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –≤ API –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤—Å–µ–≥–æ **1 –∑–∞–ø—Ä–æ—Å**, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç
–æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–ª—é—á SWR, –∞ –∑–∞–ø—Ä–æ—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ **–≤—ã–≤–æ–¥–∏—Ç—Å—è**, **–∫—ç—à–∏—Ä—É–µ—Ç—Å—è** –∏ **—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è**.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ [—Ñ–æ–∫—É—Å–µ –∏–ª–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ —Å–µ—Ç–∏](/docs/revalidation)!
–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–æ–≥–¥–∞ –Ω–æ—É—Ç–±—É–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ —Å–ø—è—â–µ–≥–æ —Ä–µ–∂–∏–º–∞ –∏–ª–∏ –æ–Ω –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è
–º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞, –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
