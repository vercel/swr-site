import { Callout } from 'nextra-theme-docs'

# é…åˆ Next.js ä½¿ç”¨

## å®¢æˆ·ç«¯æ•°æ®è¯·æ±‚ [#client-side-data-fetching]

å¦‚æœä½ çš„é¡µé¢åŒ…å«é¢‘ç¹æ›´æ–°çš„æ•°æ®ï¼Œå¹¶ä¸”ä½ ä¸éœ€è¦é¢„æ¸²æŸ“æ•°æ®ï¼Œé‚£ä¹ˆ SWR æ˜¯ä¸€ä¸ªå®Œç¾é€‰æ‹©ï¼Œè€Œä¸”ä¸éœ€è¦ç‰¹åˆ«é…ç½®ï¼šåªéœ€è¦å¼•å…¥ `useSWR`ï¼Œå¹¶åœ¨ä½¿ç”¨è¯¥æ•°æ®çš„ä»»æ„ç»„ä»¶ä¸­ä½¿ç”¨è¯¥ hook å³å¯ã€‚

å·¥ä½œåŸç†ï¼š

- é¦–å…ˆï¼Œç«‹å³æ˜¾ç¤ºæ²¡æœ‰æ•°æ®çš„ç©ºé¡µé¢ã€‚ä¹Ÿå¯ä»¥æ˜¾ç¤ºåŠ è½½è¿›åº¦æ¡ã€‚
- ç„¶åï¼Œåœ¨å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®å¹¶åœ¨å‡†å¤‡å°±ç»ªæ—¶æ¸²æŸ“æ•°æ®ã€‚

è¿™ç§æ–¹æ³•é€‚ç”¨äºç™»å½•åçš„é¡µé¢ï¼ˆæ§åˆ¶é¢æ¿ï¼‰ç­‰ã€‚å› ä¸ºç™»å½•åçš„é¡µé¢æ˜¯ä¸€ä¸ªç§æœ‰çš„ã€ç‰¹å®šäºç”¨æˆ·çš„é¡µé¢ï¼Œä¸ SEO æ— å…³ï¼Œé¡µé¢ä¹Ÿä¸éœ€è¦é¢„æ¸²æŸ“ã€‚æ•°æ®ç»å¸¸æ›´æ–°ï¼Œè¿™éœ€è¦å³æ—¶æ•°æ®åŠ è½½ã€‚

## ä½¿ç”¨é»˜è®¤æ•°æ®è¿›è¡Œé¢„æ¸²æŸ“ [#pre-rendering-with-default-data]

å¦‚æœé¡µé¢å¿…é¡»è¿›è¡Œé¢„æ¸²æŸ“, Next.js æ”¯æŒ [ä¸¤ç§å½¢å¼](https://nextjs.org/docs/basic-features/data-fetching)ï¼š **é™æ€ç”Ÿæˆ (SSG)** å’Œ **æœåŠ¡å™¨æ¸²æŸ“ (SSR)**ã€‚

ä¸SWRä¸€èµ·ä½¿ç”¨ï¼Œä½ å¯ä»¥é€šè¿‡é¢„æ¸²æŸ“é¡µé¢æ¥è·å¾— SEO , å¹¶ä¸”è¿˜å¯ä»¥æ‹¥æœ‰ç¼“å­˜ï¼Œé‡æ–°éªŒè¯ï¼Œç„¦ç‚¹è·Ÿè¸ªï¼Œå®¢æˆ·ç«¯å‘¨æœŸæ€§è¯·æ±‚æ•°æ®çš„åŠŸèƒ½ã€‚

ä½ å¯ä»¥ä½¿ç”¨ [`SWRConfig`](/docs/global-configuration) çš„ `fallback` é€‰é¡¹å°†é¢„å…ˆè¯·æ±‚çš„æ•°æ®ä½œä¸ºæ‰€æœ‰ SWR hooks çš„åˆå§‹å€¼ä¼ é€’ã€‚
ä¾‹å¦‚ä½¿ç”¨ `getStaticProps` :

```jsx
 export async function getStaticProps () {
  // `getStaticProps` åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œã€‚
  const article = await getArticleFromAPI()
  return {
    props: {
      fallback: {
        '/api/article': article
      }
    }
  }
}

function Article() {
  // `data` å°†å§‹ç»ˆæ˜¯å¯ç”¨çš„ã€‚å› ä¸ºå®ƒåœ¨`fallback`ä¸­ã€‚
  const { data } = useSWR('/api/article', fetcher)
  return <h1>{data.title}</h1>
}

export default function Page({ fallback }) {
  // è¢«`SWRConfig` æ‰€åŒ…è£¹çš„ SWR hooks å°†èƒ½å¤Ÿä½¿ç”¨è¿™äº›å€¼ã€‚
  return (
    <SWRConfig value={{ fallback }}>
      <Article />
    </SWRConfig>
  )
}
```

è¯¥é¡µé¢ä»ç„¶æ˜¯é¢„æ¸²æŸ“çš„ã€‚ å®ƒå¯¹SEOå‹å¥½ï¼Œå¹¶èƒ½å¤Ÿå¿«é€Ÿçš„å“åº”ã€‚åŒæ—¶åœ¨å®¢æˆ·ç«¯æ–¹é¢è·å¾—äº†æ¥è‡ªSWRçš„å®Œå…¨æ”¯æŒã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œçª—å£ä¸­çš„æ•°æ®å°†æŒç»­æ˜¯åŠ¨æ€ä¸”è‡ªæˆ‘æ›´æ–°çš„ã€‚

<Callout emoji="ğŸ’¡">
  `Article` ç»„ä»¶ä¼šå…ˆæ¸²æŸ“é¢„å…ˆç”Ÿæˆçš„æ•°æ®ï¼Œå¹¶ä¸”åœ¨é¡µé¢ hydrate åï¼Œå®ƒå°†å†æ¬¡è·å–æœ€æ–°æ•°æ®ï¼Œä»¥ä¿æŒæ•°æ®çš„æ—¶æ•ˆæ€§ã€‚
</Callout>

### å¤æ‚çš„ key [#complex-keys]

`useSWR` å¯ä»¥å’Œ `array` ä»¥åŠ `function` ç±»å‹çš„ key ä¸€èµ·ä½¿ç”¨ã€‚ä½¿ç”¨è¿™äº›ç±»å‹çš„ key é¢„è¯·æ±‚æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨ `unstable_serialize` åºåˆ—åŒ– `fallback` keyã€‚

```jsx
import useSWR, { unstable_serialize } from 'swr'

export async function getStaticProps () {
  const article = await getArticleFromAPI(1)
  return {
    props: {
      fallback: {
        // unstable_serialize() æ•°ç»„æ ·å¼çš„ key
        [unstable_serialize(['api', 'article', 1])]: article,
      }
    }
  }
}

function Article() {
  // ä½¿ç”¨æ•°ç»„æ ·å¼çš„ key.
  const { data } = useSWR(['api', 'article', 1], fetcher)
  return <h1>{data.title}</h1>
}

export default function Page({ fallback }) {
  return (
    <SWRConfig value={{ fallback }}>
      <Article />
    </SWRConfig>
  )
}
```