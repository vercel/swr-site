---
image:
description: 'Almost a year ago we released SWR v1.0, today we are reaching another milestone: the 2.0 version of SWR!'
date:
---

import Callout from 'nextra-theme-docs/callout'
import Bleed from 'nextra-theme-docs/bleed'

import Authors, { Author } from 'components/authors'

# Announcing SWR 2.0

<Authors date="">
</Authors>

Almost a year ago we released SWR v1.0, today we are reaching another milestone: the 2.0 version of SWR!

## Whatâ€™s New

### Better React 18 Support

### isLoading State

### keepPreviousData Option

### useSWRMutation

### Mutate Multiple Keys

### Preload API

`preload` is a new API for prefetching data programmatically. Prefetching data is important to improve user experiences and avoid waterfall problems. You can call `preload` before rendering. More information can be found [here](/docs/prefetching).

```jsx
import useSWR, { preload } from 'swr'

const fetcher = (url) => fetch(url).then((res) => res.json())
// You can call the preload function in anywhere
preload('/api/user', fetcher)
```

### Functional optimisticData

`optimisticData` is an option of mutation, which is useful to implement optimistic UI. In v2, you can pass a function as the `optimisticData` option, which accepts current data and returns the new client cache data. More information can be found [here](/docs/mutation#optimistic-updates).

```jsx
mutate('/api/user', updateUserName(newName), {
  optimisticData: user => ({ ...data, name: newName }),
  rollbackOnError: true
});
```

### Function as SWRConfig value

The value prop of `SWRConfig` accepts a function that receives the parent config and returns a new config. More information can be found [here](/docs/global-configuration).

```jsx
<SWRConfig
  value={parent => ({
    dedupingInterval: parent.dedupingInterval * 5,
    refreshInterval: 100,
  })}
>
  <Page />
</SWRConfig>
```

### DevTools

SWRDevTools is a browser extension for SWR, which helps to debug your SWR cache and the results of your fetcher. More information can be found [here](/docs/advanced/devtools).

## Migration Guide

### Fetcher no longer accepts multiple arguments

`key` is now passed as a single argument.

```diff
- useSWR([1, 2, 3], (a, b, c) => {
+ useSWR([1, 2, 3], ([a, b, c]) => {
  assert(a === 1)
  assert(b === 2)
  assert(c === 3)
})
```

### Internal Structure Of The Cached Data

The internal structure of the cache data will be an object that holds all the current states.

```diff
- assert(cache.get(key) === data)
+ assert(cache.get(key) === { data, error, isValidating })

// getter
- cache.get(key)
+ cache.get(key)?.data

// setter
- cache.set(key, data)
+ cache.set(key, { ...cache.get(key), data })
```

<Callout emoji="ðŸš¨" type="error">
  You should not write to the cache directly, it might cause undefined behavior.
</Callout>

### SWRConfig.default â†’ SWRConfig.defaultValue

`SWRConfig.defaultValue` is the property for accessing the default value.

```diff
- SWRConfig.default
+ SWRConfig.defaultValue
```

### Type InfiniteFetcher is renamed to SWRInfiniteFetcher

```diff
- import { InfiniteFetcher } from 'swr/infinite'
+ import { SWRInfiniteFetcher } from 'swr/infinite'
```

### Avoid Using Suspense On The Server-Side

When using `suspense: true` with SWR on the server-side (including pre-rendering in Next.js), it's now required to provide the initial data via [`fallbackData` or `fallback`](/docs/with-nextjs#pre-rendering-with-default-data). This means that you can't use Suspense to fetch data on the server side as of today, but either doing fully client-side data fetching, or fetch the data via the framework (such as getStaticProps in Next.js).

### Changelog

Read the full Changelog [on GitHub](https://github.com/vercel/swr/releases).

## Whatâ€™s Next

If you have any feedback about this release, please [let us know](https://github.com/vercel/swr/discussions).

## Thank You!

We also want to thank the entire community, our [142 contributors](https://github.com/vercel/swr/graphs/contributors) (+ [106 docs contributors](https://github.com/vercel/swr-site/graphs/contributors)), and everyone who helped and gave us feedback!
